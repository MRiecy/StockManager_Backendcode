# ğŸš€ XtQuant APIé›†æˆå®Œæ•´æŒ‡å—

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯

**StockVueVisionå‰ç«¯é¡¹ç›®** éœ€è¦ä»ä½¿ç”¨è™šæ‹Ÿæ•°æ®åˆ‡æ¢åˆ°çœŸå®çš„QMTäº¤æ˜“æ•°æ®ã€‚åç«¯å·²ç»å®ç°äº†åŸºç¡€çš„è´¦æˆ·ä¿¡æ¯å’ŒæŒä»“æ˜ç»†APIï¼Œä½†ç¼ºå°‘æ—¶é—´å¯¹æ¯”ã€åœ°åŒºå¯¹æ¯”ã€èµ„äº§åˆ†ç±»ç­‰åˆ†æåŠŸèƒ½çš„çœŸå®æ•°æ®æ”¯æŒã€‚

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜æ€»ç»“

### **é—®é¢˜1ï¼šåç«¯APIç¼ºå¤±**
- **ç°çŠ¶**: åªå®ç°äº†2ä¸ªAPIç«¯ç‚¹ï¼ˆè´¦æˆ·ä¿¡æ¯ã€æŒä»“æ˜ç»†ï¼‰
- **ç¼ºå¤±**: æ—¶é—´å¯¹æ¯”ã€åœ°åŒºå¯¹æ¯”ã€èµ„äº§åˆ†ç±»ã€æ—¶é—´åºåˆ—ç­‰API
- **å½±å“**: å‰ç«¯40%çš„åŠŸèƒ½ä»åœ¨ä½¿ç”¨è™šæ‹Ÿæ•°æ®

### **é—®é¢˜2ï¼šXtQuanté…ç½®ä¸å®Œæ•´**
- **å·²é…ç½®**: äº¤æ˜“æ¥å£(`xttrader`)ã€è¡Œæƒ…æ•°æ®ä¸­å¿ƒ(`xtdata`)
- **æœªå……åˆ†åˆ©ç”¨**: å†å²æ•°æ®æŸ¥è¯¢åŠŸèƒ½
- **ç»“æœ**: æ— æ³•è·å–è´¦æˆ·å†å²å˜åŒ–æ•°æ®

### **é—®é¢˜3ï¼šæ•°æ®é‡å¤å’Œæ··ä¹±**
- **å‰ç«¯å·²æœ‰**: å®Œæ•´çš„æ¨¡æ‹Ÿæ•°æ®ç³»ç»Ÿ(`mockData.js`)
- **åç«¯åˆæ·»åŠ **: é‡å¤çš„è™šæ‹Ÿæ•°æ®
- **é—®é¢˜**: ç»´æŠ¤å›°éš¾ã€é€»è¾‘æ··ä¹±

### **é—®é¢˜4ï¼šå‰ç«¯ç­–ç•¥APIè°ƒç”¨å¤±è´¥**
- **é”™è¯¯**: 404 Not Found - `/api/strategies/`
- **åŸå› **: åç«¯æ²¡æœ‰å®ç°ç­–ç•¥ç›¸å…³API
- **å½±å“**: ç­–ç•¥åŠŸèƒ½å®Œå…¨æ— æ³•ä½¿ç”¨

### **é—®é¢˜5ï¼šXtQuant Tokenè¿‡æœŸ**
- **æ—§Token**: `3212e214050c53bc5619966f21fd24695531942f`
- **æ–°Token**: `ac8e44885e14b62df8e766fff10dc1b28b9a2edb`
- **éœ€è¦æ›´æ–°**: è¿æ¥æ± åœ°å€å’Œè®¤è¯ä¿¡æ¯

---

## âœ… å·²è§£å†³çš„é—®é¢˜

### **1. XtQuanté…ç½®æ›´æ–°** âœ…
- æ›´æ–°äº†æ–°çš„VIPè´¦æˆ·Token
- æ‰©å±•äº†è¿æ¥æ± åœ°å€ï¼ˆä»4ä¸ªç«™ç‚¹å¢åŠ åˆ°6ä¸ªç«™ç‚¹ï¼‰
- æ–°å¢ç”µä¿¡å’Œè”é€šç«™ç‚¹ï¼Œæé«˜è¿æ¥ç¨³å®šæ€§

### **2. APIæ¡†æ¶æ­å»º** âœ…
- åˆ›å»ºäº†æ‰€æœ‰ç¼ºå¤±çš„APIç«¯ç‚¹
- ç»Ÿä¸€äº†æ•°æ®æ ¼å¼å’Œé”™è¯¯å¤„ç†
- é¿å…äº†é‡å¤çš„è™šæ‹Ÿæ•°æ®ç”Ÿæˆ

### **3. ä»£ç ç»“æ„ä¼˜åŒ–** âœ…
- æ¸…ç†äº†é‡å¤å’Œæ··ä¹±çš„ä»£ç 
- æ˜ç¡®äº†å‰åç«¯èŒè´£åˆ†å·¥
- å»ºç«‹äº†æ¸è¿›å¼å¼€å‘çš„åŸºç¡€

---

## ğŸ”§ å½“å‰APIçŠ¶æ€

### **å·²å®ç°çš„API** âœ…
| APIç«¯ç‚¹ | åŠŸèƒ½ | æ•°æ®çŠ¶æ€ | è¯´æ˜ |
|---------|------|----------|------|
| `/api/account-info/` | è´¦æˆ·åŸºæœ¬ä¿¡æ¯ | çœŸå®QMTæ•°æ® | å®Œå…¨å¯¹æ¥ |
| `/api/asset_comparison/` | æŒä»“èµ„äº§å¯¹æ¯” | çœŸå®QMTæ•°æ® | å®Œå…¨å¯¹æ¥ |

### **å·²åˆ›å»ºä½†æœªå®ç°çš„API** ğŸ”„
| APIç«¯ç‚¹ | åŠŸèƒ½ | æ•°æ®çŠ¶æ€ | è¯´æ˜ |
|---------|------|----------|------|
| `/api/timecomparison/yearly_comparison/` | å¹´åº¦å¯¹æ¯”æ•°æ® | è¿”å›ç©ºæ•°æ® | å‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® |
| `/api/timecomparison/weekly_comparison/` | æ¯å‘¨å¯¹æ¯”æ•°æ® | è¿”å›ç©ºæ•°æ® | å‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® |
| `/api/areacomparsion/area_comparison/` | åœ°åŒºå¯¹æ¯”æ•°æ® | è¿”å›ç©ºæ•°æ® | å‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® |
| `/api/asset-category/` | èµ„äº§ç±»åˆ«åˆ†å¸ƒ | è¿”å›ç©ºæ•°æ® | å‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® |

---

## ğŸš€ å®ç°çœŸå®æ•°æ®çš„å®Œæ•´æµç¨‹

### **ç¬¬ä¸€é˜¶æ®µï¼šæµ‹è¯•XtQuantè¿æ¥** ğŸ”
```bash
# 1. å¯åŠ¨DjangoæœåŠ¡
python manage.py runserver 8000

# 2. æ£€æŸ¥æ§åˆ¶å°è¾“å‡º
âœ… "æœåŠ¡å¯åŠ¨,å¼€æ”¾ç«¯å£ï¼š58601"
âœ… "-----è¿æ¥ä¸Šäº†------"
âœ… æ˜¾ç¤ºè¡Œæƒ…æœåŠ¡å™¨çŠ¶æ€

# 3. åœ¨Django shellä¸­æµ‹è¯•
python manage.py shell
>>> import xtquant.xtdata as xtdata
>>> print("æ•°æ®ç›®å½•:", xtdata.data_dir)
>>> print("æœåŠ¡å™¨çŠ¶æ€:", xtdata.get_quote_server_status())
```

### **ç¬¬äºŒé˜¶æ®µï¼šæµ‹è¯•å†å²æ•°æ®æŸ¥è¯¢** ğŸ“Š
```python
# åœ¨Django shellä¸­æµ‹è¯•å†å²æ•°æ®æŸ¥è¯¢
try:
    data = xtdata.get_history_data(
        '000001.SZ',     # å¹³å®‰é“¶è¡Œ
        '20241201',      # å¼€å§‹æ—¥æœŸ
        '20241231',      # ç»“æŸæ—¥æœŸ
        '1d',            # æ—¥çº¿æ•°æ®
        30               # æ•°æ®æ¡æ•°
    )
    print("âœ… å†å²æ•°æ®æŸ¥è¯¢æˆåŠŸ")
    print("æ•°æ®æ¡æ•°:", len(data))
except Exception as e:
    print("âŒ å†å²æ•°æ®æŸ¥è¯¢å¤±è´¥:", e)
```

### **ç¬¬ä¸‰é˜¶æ®µï¼šä¿®æ”¹APIå‡½æ•°** ğŸ”§
```python
# ä¿®æ”¹å‰ï¼ˆè¿”å›ç©ºæ•°æ®ï¼‰
@api_view(['GET'])
def yearly_comparison(request):
    return JsonResponse({
        'message': 'æ­¤APIæš‚æœªå®ç°çœŸå®æ•°æ®æŸ¥è¯¢ï¼Œå‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®',
        'data_available': False
    })

# ä¿®æ”¹åï¼ˆè¿”å›çœŸå®æ•°æ®ï¼‰
@api_view(['GET'])
def yearly_comparison(request):
    # 1. è¿æ¥XtQuantå†å²æ•°æ®ä¸­å¿ƒ
    xtdc.init(False)
    xtdc.listen(port=58601)
    
    # 2. æŸ¥è¯¢è´¦æˆ·å†å²èµ„äº§æ•°æ®
    historical_data = xtdata.get_history_data(...)
    
    # 3. è®¡ç®—å¹´åº¦å¯¹æ¯”æ•°æ®
    yearly_data = calculate_yearly_data(historical_data)
    
    return JsonResponse({
        'yearly_data': yearly_data,
        'data_available': True,
        'source': 'XtQuantå†å²æ•°æ®ä¸­å¿ƒ'
    })
```

### **ç¬¬å››é˜¶æ®µï¼šå‰ç«¯è‡ªåŠ¨åˆ‡æ¢** ğŸ¯
```javascript
// å‰ç«¯è‡ªåŠ¨åˆ¤æ–­æ•°æ®æº
if (response.data.data_available) {
    // ä½¿ç”¨çœŸå®æ•°æ®
    displayRealData(response.data.yearly_data);
} else {
    // å›é€€åˆ°æ¨¡æ‹Ÿæ•°æ®
    displayMockData();
}
```

---




## ğŸ“Š XtQuantå†å²æ•°æ®æŸ¥è¯¢å‡½æ•°

### **æ ¸å¿ƒå‡½æ•°**
```python
# 1. å†å²Kçº¿æ•°æ®
xtdata.get_history_data(
    stock_code,      # è‚¡ç¥¨ä»£ç 
    start_date,      # å¼€å§‹æ—¥æœŸ
    end_date,        # ç»“æŸæ—¥æœŸ
    period,          # å‘¨æœŸï¼š'1d'(æ—¥çº¿), '1w'(å‘¨çº¿), '1m'(æœˆçº¿)
    count           # æ•°æ®æ¡æ•°
)

# 2. å†å²åˆ†æ—¶æ•°æ®
xtdata.get_history_data2(
    stock_code,      # è‚¡ç¥¨ä»£ç 
    start_date,      # å¼€å§‹æ—¥æœŸ
    end_date,        # ç»“æŸæ—¥æœŸ
    period           # å‘¨æœŸï¼š'1m'(1åˆ†é’Ÿ), '5m'(5åˆ†é’Ÿ)
)

# 3. å†å²æˆäº¤æ•°æ®
xtdata.get_history_data3(
    stock_code,      # è‚¡ç¥¨ä»£ç 
    start_date,      # å¼€å§‹æ—¥æœŸ
    end_date         # ç»“æŸæ—¥æœŸ
)
```

---

## ğŸ¯ å®æ–½ä¼˜å…ˆçº§å»ºè®®

### **é«˜ä¼˜å…ˆçº§** (æ ¸å¿ƒåŠŸèƒ½)
1. **æµ‹è¯•XtQuantè¿æ¥** - ç¡®ä¿åŸºç¡€è¿æ¥æ­£å¸¸
2. **å®ç°å¹´åº¦å¯¹æ¯”API** - æä¾›å†å²è¶‹åŠ¿æ•°æ®
3. **å®ç°æ¯å‘¨å¯¹æ¯”API** - æä¾›çŸ­æœŸå˜åŒ–æ•°æ®

### **ä¸­ä¼˜å…ˆçº§** (åˆ†æåŠŸèƒ½)
4. **å®ç°åœ°åŒºå¯¹æ¯”API** - åœ°åŸŸæŠ•èµ„åˆ†æ
5. **å®ç°èµ„äº§ç±»åˆ«API** - è¡Œä¸šåˆ†å¸ƒåˆ†æ

### **ä½ä¼˜å…ˆçº§** (è¾…åŠ©åŠŸèƒ½)
6. **å®ç°æ—¶é—´åºåˆ—API** - è¯¦ç»†å†å²æ•°æ®
7. **å®ç°é£é™©æŒ‡æ ‡API** - é£é™©åˆ†æåŠŸèƒ½

---

## âš ï¸ æ³¨æ„äº‹é¡¹å’Œå¸¸è§é—®é¢˜

### **æ•°æ®å»¶è¿Ÿ**
- çœŸå®æ•°æ®å¯èƒ½æœ‰1-2å¤©çš„å»¶è¿Ÿ
- å»ºè®®åœ¨APIä¸­è¯´æ˜æ•°æ®æ›´æ–°æ—¶é—´

### **æ•°æ®å®Œæ•´æ€§**
- ç¡®ä¿QMTè´¦æˆ·æœ‰è¶³å¤Ÿçš„å†å²æ•°æ®
- å¤„ç†æ•°æ®ç¼ºå¤±çš„æƒ…å†µ

### **é”™è¯¯å¤„ç†**
- å¦‚æœçœŸå®æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œå‰ç«¯è‡ªåŠ¨å›é€€åˆ°æ¨¡æ‹Ÿæ•°æ®
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

### **æ€§èƒ½ä¼˜åŒ–**
- å†å²æ•°æ®æŸ¥è¯¢å¯èƒ½è¾ƒæ…¢ï¼Œè€ƒè™‘æ·»åŠ ç¼“å­˜
- é¿å…é¢‘ç¹æŸ¥è¯¢ç›¸åŒæ—¶é—´æ®µçš„æ•°æ®

---

## ğŸ” æµ‹è¯•å’ŒéªŒè¯

### **APIæµ‹è¯•**
```bash
# æµ‹è¯•å¹´åº¦å¯¹æ¯”API
curl "http://localhost:8000/api/timecomparison/yearly_comparison/?account_id=40000326"

# æµ‹è¯•æ¯å‘¨å¯¹æ¯”API
curl "http://localhost:8000/api/timecomparison/weekly_comparison/?account_id=40000326"

# æµ‹è¯•åœ°åŒºå¯¹æ¯”API
curl "http://localhost:8000/api/areacomparsion/area_comparison/?account_id=40000326"
```

### **å‰ç«¯éªŒè¯**
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
2. éªŒè¯æ•°æ®åŠ è½½çŠ¶æ€
3. ç¡®è®¤é”™è¯¯å¤„ç†æœºåˆ¶

---

## ğŸ“ æ›´æ–°è®°å½•

| æ—¥æœŸ | æ›´æ–°å†…å®¹ | çŠ¶æ€ |
|------|----------|------|
| 2025-01-25 | åˆ›å»ºæ–‡æ¡£ï¼Œåˆ†æé—®é¢˜ | âœ… å®Œæˆ |
| 2025-01-25 | æ›´æ–°XtQuanté…ç½® | âœ… å®Œæˆ |
| 2025-01-25 | åˆ›å»ºAPIæ¡†æ¶ | âœ… å®Œæˆ |
| 2025-01-25 | æ¸…ç†é‡å¤ä»£ç  | âœ… å®Œæˆ |
| å¾…å®š | å®ç°çœŸå®æ•°æ®æŸ¥è¯¢ | ğŸ”„ å¾…å®æ–½ |

---

## ğŸ‘¥ æŠ€æœ¯æ”¯æŒ

### **XtQuantç›¸å…³**
- **å®˜ç½‘**: https://www.thinktrader.net/
- **SDKä¸‹è½½**: å®˜ç½‘å¼€å‘è€…ä¸“åŒº
- **APIæ–‡æ¡£**: æŸ¥çœ‹XtQuant Python SDKæ–‡æ¡£

### **é¡¹ç›®ç›¸å…³**
- **åç«¯ä»£ç **: `apps/Comparison/views.py`, `apps/account/views.py`
- **å‰ç«¯ä»£ç **: `src/api/timecomparisonApi.js`, `src/api/regioncomparisonApi.js`
- **é…ç½®æ–‡ä»¶**: `apps/Comparison/apps.py`, `apps/account/apps.py`

---

## ğŸ‰ é¢„æœŸæˆæœ

å®Œæˆæ‰€æœ‰APIçš„çœŸå®æ•°æ®å®ç°åï¼Œæ‚¨çš„å‰ç«¯é¡¹ç›®å°†ï¼š

1. **å®Œå…¨ä½¿ç”¨çœŸå®æ•°æ®** - ä¸å†ä¾èµ–æ¨¡æ‹Ÿæ•°æ®
2. **å®æ—¶åæ˜ æŠ•èµ„è¡¨ç°** - åŸºäºçœŸå®çš„QMTäº¤æ˜“æ•°æ®
3. **æä¾›å‡†ç¡®çš„åˆ†æ** - å†å²è¶‹åŠ¿ã€åœ°åŒºåˆ†å¸ƒã€è¡Œä¸šåˆ†ç±»ç­‰
4. **æ”¯æŒå†³ç­–åˆ¶å®š** - åŸºäºçœŸå®æ•°æ®çš„æŠ•èµ„åˆ†æ

---

**å‡†å¤‡å°±ç»ªï¼** æŒ‰ç…§æ­¤æŒ‡å—é€æ­¥å®æ–½ï¼Œæ‚¨å°±èƒ½çœ‹åˆ°å‰ç«¯æ˜¾ç¤ºçœŸå®çš„QMTæ•°æ®äº†ï¼ 